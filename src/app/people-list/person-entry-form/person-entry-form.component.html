<form
  [formGroup]="personForm"
  (ngSubmit)="onSubmit()"
  class="person-entry-form"
  novalidate
>
  <input
    class="form-control section section-name tbl-row mr-12 mw-6"
    [class.is-invalid]="isFieldValid('name')"
    type="text"
    placeholder="Name"
    formControlName="name"
    [typeahead]="getTypeAhead('name')"
    required
  />
  <select
    class="form-control section section-skill tbl-row mr-12 mw-3"
    [class.is-invalid]="isFieldValid('skill')"
    formControlName="skill"
  >
    <option value="EM">EM</option>
    <option value="ASC">ASC</option>
    <option value="FELL">FELL</option>
    <option value="BA">BA</option>
    <option value="INT">INT</option>
  </select>
  <calendar
    [ngClass]="getFieldClasses('availDate')"
    [dateVal]="personForm.get('availDate')!.value"
    [showError]="isFieldValid('availDate')"
    (dateChangeEvent)="onDateChange($event)"
  ></calendar>

  <span [ngClass]="getFieldClasses('days')">{{ getDaysAvailable() }}</span>

  <div class="btn-group tbl-row mr-12">
    <week-days
      class="flex flex-ver-ctr"
      [weekObj]="localCalendarObj"
      (calendarChange)="onCalendarChange($event)"
      [inEditMode]="true"
    ></week-days>
  </div>

  <div [ngClass]="getFieldClasses('tags')">
    <div class="tag-list flex flex-ver-ctr">
      <ul class="tag-list flex flex-ver-ctr">
        <li
          *ngFor="let tag of tags"
          class="badge btn-inactive"
          [class.bg-primary-light]="tag.type === 'ind'"
          [class.bg-secondary-light]="tag.type === 'fun'"
        >
          {{ tag.value }}
          <i
            class="bi bi-x-lg tag-delete clickable"
            (click)="onTagDelete(tag.value)"
          ></i>
        </li>
        <li>
          <i
            *ngIf="!showAddTag"
            class="bi bi-plus clickable add-tag"
            (click)="setShowAddTag(true)"
          ></i>
        </li>
        <li>
          <form *ngIf="showAddTag" (ngSubmit)="onTagSubmit()">
            <input
              class="form-control form-control-xs tag-input m-bot-2"
              type="text"
              [formControl]="tagInput"
              [typeahead]="getTypeAhead('tag')"
            />
          </form>
        </li>
      </ul>
    </div>
  </div>
  <select
    class="form-control section section-pdm tbl-row mr-12 mw-4"
    formControlName="pdm"
  >
    <option *ngFor="let pdm of pdmArr" [value]="pdm">{{ pdm }}</option>
  </select>
  <input
    id="person-comments"
    class="form-control section section-comments tbl-row mr-12"
    type="text"
    placeholder="Comments"
    formControlName="comments"
  />

  <label for="{{ 'submit-form-' + id }}">
    <i class="bi bi-check-circle i-active mr-8"></i>
  </label>
  <i class="bi bi-trash i-active" (click)="handleDelete()"></i>
  <button id="{{ 'submit-form-' + id }}" type="submit" hidden></button>
</form>
